const FocusingJsTemplate=`
  <link rel="preload" href="//at.alicdn.com/t/font_3143830_bfpbyskko9i.woff2" as="font" type="font/woff2"
      crossOrigin="anonymous">
  <link rel="stylesheet" href="//at.alicdn.com/t/font_3143830_bfpbyskko9i.css">
  <focusing-js>
      <span
        class="iconfont icon-arrowleft"
        style="position: fixed;left: 2rem;top: 1.5rem;font-size: 2rem;cursor: pointer"
        onClick="top.FocusingJsExitMode()"
      ></span>
      <span
        class="iconfont icon-setting"
        style="position: fixed;right: 1.5rem;top: 1.5rem;font-size: 2rem;cursor: pointer"
        onClick="top.FocusingJsToggleEditShow('inline-block')"
      ></span>

      <div class="fs-main-container heti heti--poetry"></div>

      <div class="fs-edit-container-mask" onClick="top.FocusingJsToggleEditShow('none')"></div>

      <div class="fs-edit-container">
        <div style="position: relative">
          <span
            class="iconfont icon-close"
            style="position: absolute;right: 1.2rem;top: 1.2rem;font-size: 1.5rem;cursor: pointer;color: #333333 !important;"
            onClick="top.FocusingJsToggleEditShow('none')"
          ></span>
        </div>

        <div class="fs-main-color-wrapper">
          <div class="fs-label">主题色</div>
          <div class="fs-main-color-container">
            <div onClick="top.FocusingJsChangeBc(this, '#9DD2DC', '#333333')" class="fs-block"
                 style="background-color: #9DD2DC; color: #333333;">Aa
            </div>
            <div onClick="top.FocusingJsChangeBc(this, '#F0D592', '#333333')" class="fs-block"
                 style="background-color: #F0D592; color: #333333;">Aa
            </div>
            <div onClick="top.FocusingJsChangeBc(this, '#D1BFEB', '#333333')" class="fs-block"
                 style="background-color: #D1BFEB; color: #333333;">Aa
            </div>
            <div onClick="top.FocusingJsChangeBc(this, '#FCF5ED', '#333333')" class="fs-block"
                 style="background-color: #FCF5ED; color: #333333;">Aa
            </div>
            <div onClick="top.FocusingJsChangeBc(this, '#F5F5F5', '#333333')" class="fs-block"
                 style="background-color: #F5F5F5; color: #333333;">Aa
            </div>
            <div onClick="top.FocusingJsChangeBc(this, '#363B3F', '#eeeeee')" class="fs-block"
                 style="background-color: #363B3F; color: #eeeeee;">Aa
            </div>
            <div onClick="top.FocusingJsChangeBc(this, '#222222', '#cccccc')" class="fs-block"
                 style="background-color: #222222; color: #cccccc;">Aa
            </div>
          </div>
        </div>

        <div id="fs-slider-container">
          <div class="fs-slider-item">
            <div class="fs-label">字体大小</div>
            <input class="fs-slider" id="fs-fontSize-slider" type="range" value="" min="0" max="100" step="20">
          </div>
          <div class="fs-slider-item">
            <div class="fs-label">行间距</div>
            <input class="fs-slider" id="fs-lineHeight-slider" type="range" value="" min="0" max="100" step="20">
          </div>
          <div class="fs-slider-item">
            <div class="fs-label">版面宽度</div>
            <input class="fs-slider" id="fs-width-slider" type="range" value="" min="30" max="100">
          </div>
          <div class="fs-slider-item">
            <div class="fs-label">字间距</div>
            <input class="fs-slider" id="fs-letterSpacing-slider" type="range" value="" min="0" max="100" step="20">
          </div>
          <div class="fs-slider-item">
            <div class="fs-label">字体粗细</div>
            <input class="fs-slider" id="fs-fontWeight-slider" type="range" value="" min="0" max="100" step="20">
          </div>
        </div>

      </div>
    </focusing-js>
  `,LOCALSTORAGE_KEY="focusingjs_style";class FocusingJs{constructor(e){this.id=e,this.styleObj={backgroundColor:"",lineHeight:"",fontSize:"",color:"",letterSpacing:"",fontWeight:"",width:""},this.initMethod(),this.init()}initMethod(){top.FocusingJsIns=null,top.FocusingJsChangeBc=function(e,t,s){top.FocusingJsIns.changeStyle("backgroundColor",t),top.FocusingJsIns.changeStyle("color",s);const i=document.querySelectorAll("focusing-js .fs-main-color-container .fs-block");i.forEach(e=>{e.innerHTML="Aa"}),e.innerHTML='<span style="color: #17A34A">-</span>'},top.FocusingJsToggleEditShow=function(e){const t=document.querySelectorAll("focusing-js .fs-edit-container-mask")[0],s=document.querySelectorAll("focusing-js .fs-edit-container")[0];e=e,t.style.display=e,s.style.display=e,top.FocusingJsIns.saveSetting()},top.FocusingJsInit=function(){top.FocusingJsIns.init()},top.FocusingJsExitMode=function(){top.FocusingJsIns.close()}}init(){if(top.FocusingJsIns=this,0===document.querySelectorAll("focusingjs").length){const e=document.querySelectorAll("html")[0],t=document.createElement("div");t.innerHTML=FocusingJsTemplate,e.appendChild(t),this.checkLocalStyle(),this.setStyle()}this.focusingJsContainer=document.querySelectorAll("focusing-js .fs-main-container")[0],this.focusingJs=document.querySelectorAll("focusing-js")[0]}open(){(top.FocusingJsIns=this).toggleContainerShow("open");var e=document.querySelectorAll(this.id)[0];this.focusingJsContainer.innerHTML=e.innerHTML,this.lockBody(!0)}close(){this.lockBody(!1),this.toggleContainerShow("close")}lockBody(e){const t=document.querySelectorAll("body")[0];e?(this.originBodyStyle=t.style,t.style.overflow="hidden"):t.style=this.originBodyStyle}toggleContainerShow(e){var t={close:{opacity:0,zIndex:-1},open:{opacity:1,zIndex:9999999}};this.focusingJs.style.opacity=t[e].opacity,this.focusingJs.style.zIndex=t[e].zIndex}checkLocalStyle(){var e=localStorage.getItem(LOCALSTORAGE_KEY);this.styleObj=e?function(e){e=JSON.parse(e);let t;try{t={backgroundColor:e.backgroundColor,lineHeight:e.lineHeight,fontSize:e.fontSize,fontWeight:e.fontWeight,color:e.color,letterSpacing:e.letterSpacing,width:e.width}}catch(e){localStorage.removeItem(LOCALSTORAGE_KEY),t=s.getDefaultStyle()}return t}(e):this.getDefaultStyle();const s=this}setStyle(){for(var e in this.styleObj)this.changeStyle(e,this.styleObj[e]),"backgroundColor"===e&&function(t){const e=["#9DD2DC","#F0D592","#D1BFEB","#FCF5ED","#F5F5F5","#363B3F","#222222"].findIndex(e=>e===t),s=document.querySelectorAll("focusing-js .fs-main-color-container .fs-block");s[e].innerHTML='<span style="color: #17A34A">-</span>'}(this.styleObj[e]);this.setSlider()}setSlider(){const e=document.querySelector("focusing-js #fs-lineHeight-slider"),t=document.querySelector("focusing-js #fs-width-slider"),s=document.querySelector("focusing-js #fs-fontSize-slider"),i=document.querySelector("focusing-js #fs-letterSpacing-slider"),o=document.querySelector("focusing-js #fs-fontWeight-slider"),n=this;e.addEventListener("input",e=>{f("lineHeight",Number(e.target.value),l)}),t.addEventListener("input",e=>{f("width",Number(e.target.value)+"%")}),s.addEventListener("input",e=>{f("fontSize",Number(e.target.value),c)}),i.addEventListener("input",e=>{f("letterSpacing",Number(e.target.value),r)}),o.addEventListener("input",e=>{f("fontWeight",Number(e.target.value),a)});const l={0:"3rem",20:"4.5rem",40:"6rem",60:"7.5rem",80:"9rem",100:"10rem"},c={0:"1rem",20:"1.5rem",40:"2rem",60:"2.5rem",80:"3rem",100:"3.5rem"},r={0:"0.5rem",20:"0.7rem",40:"0.9rem",60:"1.1rem",80:"1.3rem",100:"1.5rem"},a={0:300,20:400,40:500,60:600,80:700,100:800};var d,u;function g(e,t,s){const i={};for(var o in s)i[s[o]]=o;e.setAttribute("value",i[t])}function f(e,t,s){n.changeStyle(e,s?s[t]:t)}g(e,this.styleObj.lineHeight,l),g(s,this.styleObj.fontSize,c),g(i,this.styleObj.letterSpacing,r),g(o,this.styleObj.fontWeight,a),d=t,u=this.styleObj.width,d.setAttribute("value",u.substr(0,u.length-1))}getDefaultStyle(){return{backgroundColor:"#D1BFEB",lineHeight:"7.5rem",fontSize:"2.5rem",color:"#333333",letterSpacing:"0.5rem",fontWeight:500,width:"80%"}}changeStyle(e,t){let s;s=(["backgroundColor","color"].includes(e)?document.querySelectorAll("focusing-js"):document.querySelectorAll("focusing-js .fs-main-container"))[0],s.style[e]=t,this.styleObj[e]=t}saveSetting(){localStorage.setItem(LOCALSTORAGE_KEY,JSON.stringify(this.styleObj))}}module.exports=FocusingJs;